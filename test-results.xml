<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="6" skipped="0" tests="7" time="26.745" timestamp="2025-06-20T12:02:54.052959+00:00" hostname="ec6501791b0b"><testcase classname="tests.test_real_integration.TestDesignerRealIntegration" name="test_single_input_basic_processing" time="3.180"><failure message="AssertionError: Expected output file not found: /tmp/designer_real_test_kgcovtej/single_input_test.nii.gz&#10;assert False&#10; +  where False = exists()&#10; +    where exists = PosixPath('/tmp/designer_real_test_kgcovtej/single_input_test.nii.gz').exists">tests/test_real_integration.py:330: in test_single_input_basic_processing
    self.assert_output_files_exist(str(output_path), ['.nii.gz', '.bval', '.bvec'])
tests/test_real_integration.py:256: in assert_output_files_exist
    assert file_path.exists(), f"Expected output file not found: {file_path}"
E   AssertionError: Expected output file not found: /tmp/designer_real_test_kgcovtej/single_input_test.nii.gz
E   assert False
E    +  where False = exists()
E    +    where exists = PosixPath('/tmp/designer_real_test_kgcovtej/single_input_test.nii.gz').exists</failure></testcase><testcase classname="tests.test_real_integration.TestDesignerRealIntegration" name="test_multiple_input_series" time="3.097"><failure message="AssertionError: Expected output file not found: /tmp/designer_real_test_kgcovtej/multi_input_test.nii.gz&#10;assert False&#10; +  where False = exists()&#10; +    where exists = PosixPath('/tmp/designer_real_test_kgcovtej/multi_input_test.nii.gz').exists">tests/test_real_integration.py:368: in test_multiple_input_series
    self.assert_output_files_exist(str(output_path), ['.nii.gz', '.bval', '.bvec'])
tests/test_real_integration.py:256: in assert_output_files_exist
    assert file_path.exists(), f"Expected output file not found: {file_path}"
E   AssertionError: Expected output file not found: /tmp/designer_real_test_kgcovtej/multi_input_test.nii.gz
E   assert False
E    +  where False = exists()
E    +    where exists = PosixPath('/tmp/designer_real_test_kgcovtej/multi_input_test.nii.gz').exists</failure></testcase><testcase classname="tests.test_real_integration.TestDesignerRealIntegration" name="test_denoising_processing" time="8.090"><failure message="AssertionError: Command failed with return code 1: designer.py: &#10;  designer.py: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.&#10;  designer.py: &#10;  designer.py: Generated scratch directory: /tmp/designer_real_test_kgcovtej/scratch3&#10;  Command:  mrinfo -strides &quot;/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz&quot;&#10;  Command:  mrconvert -strides &quot;1,2,3,4&quot; -fslgrad &quot;/tmp/designer_real_test_kgcovtej/data/meso1.bvec&quot; &quot;/tmp/designer_real_test_kgcovtej/data/meso1.bval&quot; &quot;/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz&quot; &quot;/tmp/designer_real_test_kgcovtej/scratch3/dwi.mif&quot;&#10;  /workspaces/DESIGNER-v2/lib/designer_input_utils.py:453: UserWarning: #x1B[31m[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file&#10;    warnings.warn(Fore.RED + '[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file')&#10;  designer.py: Changing to scratch directory (/tmp/designer_real_test_kgcovtej/scratch3)&#10;  /usr/local/lib/python3.12/site-packages/ants/utils/mni2tal.py:5: SyntaxWarning: invalid escape sequence '\%'&#10;    &quot;&quot;&quot;&#10;  &#10;  designer.py: [ERROR] Unhandled Python exception:&#10;  designer.py: [ERROR]   KeyError: 'antsImageHeaderInfo'&#10;  designer.py: [ERROR] Traceback:&#10;  designer.py: [ERROR]   /workspaces/DESIGNER-v2/designer2/designer.py:145 (in execute())&#10;  designer.py: [ERROR]     run_mppca(&#10;  designer.py: [ERROR]   /workspaces/DESIGNER-v2/lib/designer_func_wrappers.py:46 (in run_mppca())&#10;  designer.py: [ERROR]     nii = image_read('tmp_dwi.nii')&#10;  designer.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:517 (in image_read())&#10;  designer.py: [ERROR]     hinfo = image_header_info(filename)&#10;  designer.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:433 (in image_header_info())&#10;  designer.py: [ERROR]     libfn = utils.get_lib_fn(&quot;antsImageHeaderInfo&quot;)&#10;  designer.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/utils/process_args.py:29 (in get_lib_fn())&#10;  designer.py: [ERROR]     return lib.__dict__[string]&#10;  designer.py: Scratch directory retained; location: /tmp/designer_real_test_kgcovtej/scratch3&#10;  &#10;assert 1 == 0&#10; +  where 1 = CompletedProcess(args=['/usr/local/bin/python', '/workspaces/DESIGNER-v2/designer2/designer.py', '/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz', '/tmp/designer_real_test_kgcovtej/denoise_test', '-denoise', '-extent', '3,3,3', '-scratch', '/tmp/designer_real_test_kgcovtej/scratch3', '-nocleanup'], returncode=1, stdout='... no bids files or image orientation key identified\nAssuming orientation is axial based on strides\n... no bids files identified\ninput DWI data has properties:\n             0     1\nb-value    0.0   1.0\nb-shape    1.0   1.0\nn volumes  3.0  27.0\necho time  0.0   0.0\n', stderr='designer.py: \ndesigner.py: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.\ndesigner.py: \ndesigner.py: Generated scratch directory: /tmp/designer_real_test_kgcovtej/scratch3\nCommand:  mrinfo -strides &quot;/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz&quot;\nCommand:  mrconvert -strides &quot;1,2,3,4&quot; -fslgrad &quot;/tmp/designer_real_test_kgcovtej/data/meso1.bvec&quot; &quot;/tmp/designer_real_test_kgcovtej/data/meso1.bval&quot; &quot;/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz&quot; &quot;/tmp/designer_real_test_kgcovtej/scratch3/dwi.mif&quot;\n/workspaces/DESIGNER-v2/lib/designer_input_utils.py:453: UserWarning: \x1b[31m[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file\n  warnings.warn(Fore.RED + \'[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file\')\ndesigner.py: Changing to scratch directory (/tmp/designer_real_test_kgcovtej/scratch3)\n/usr/local/lib/python3.12/site-packages/ants/utils/mni2tal.py:5: SyntaxWarning: invalid escape sequence \'\\%\'\n  &quot;&quot;&quot;\n\ndesigner.py: [ERROR] Unhandled Python exception:\ndesigner.py: [ERROR]   KeyError: \'antsImageHeaderInfo\'\ndesigner.py: [ERROR] Traceback:\ndesigner.py: [ERROR]   /workspaces/DESIGNER-v2/designer2/designer.py:145 (in execute())\ndesigner.py: [ERROR]     run_mppca(\ndesigner.py: [ERROR]   /workspaces/DESIGNER-v2/lib/designer_func_wrappers.py:46 (in run_mppca())\ndesigner.py: [ERROR]     nii = image_read(\'tmp_dwi.nii\')\ndesigner.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:517 (in image_read())\ndesigner.py: [ERROR]     hinfo = image_header_info(filename)\ndesigner.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:433 (in image_header_info())\ndesigner.py: [ERROR]     libfn = utils.get_lib_fn(&quot;antsImageHeaderInfo&quot;)\ndesigner.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/utils/process_args.py:29 (in get_lib_fn())\ndesigner.py: [ERROR]     return lib.__dict__[string]\ndesigner.py: Scratch directory retained; location: /tmp/designer_real_test_kgcovtej/scratch3\n').returncode">tests/test_real_integration.py:402: in test_denoising_processing
    assert result.returncode == 0, f"Command failed with return code {result.returncode}: {result.stderr}"
E   AssertionError: Command failed with return code 1: designer.py: 
E     designer.py: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.
E     designer.py: 
E     designer.py: Generated scratch directory: /tmp/designer_real_test_kgcovtej/scratch3
E     Command:  mrinfo -strides "/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz"
E     Command:  mrconvert -strides "1,2,3,4" -fslgrad "/tmp/designer_real_test_kgcovtej/data/meso1.bvec" "/tmp/designer_real_test_kgcovtej/data/meso1.bval" "/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz" "/tmp/designer_real_test_kgcovtej/scratch3/dwi.mif"
E     /workspaces/DESIGNER-v2/lib/designer_input_utils.py:453: UserWarning: #x1B[31m[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file
E       warnings.warn(Fore.RED + '[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file')
E     designer.py: Changing to scratch directory (/tmp/designer_real_test_kgcovtej/scratch3)
E     /usr/local/lib/python3.12/site-packages/ants/utils/mni2tal.py:5: SyntaxWarning: invalid escape sequence '\%'
E       """
E     
E     designer.py: [ERROR] Unhandled Python exception:
E     designer.py: [ERROR]   KeyError: 'antsImageHeaderInfo'
E     designer.py: [ERROR] Traceback:
E     designer.py: [ERROR]   /workspaces/DESIGNER-v2/designer2/designer.py:145 (in execute())
E     designer.py: [ERROR]     run_mppca(
E     designer.py: [ERROR]   /workspaces/DESIGNER-v2/lib/designer_func_wrappers.py:46 (in run_mppca())
E     designer.py: [ERROR]     nii = image_read('tmp_dwi.nii')
E     designer.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:517 (in image_read())
E     designer.py: [ERROR]     hinfo = image_header_info(filename)
E     designer.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:433 (in image_header_info())
E     designer.py: [ERROR]     libfn = utils.get_lib_fn("antsImageHeaderInfo")
E     designer.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/utils/process_args.py:29 (in get_lib_fn())
E     designer.py: [ERROR]     return lib.__dict__[string]
E     designer.py: Scratch directory retained; location: /tmp/designer_real_test_kgcovtej/scratch3
E     
E   assert 1 == 0
E    +  where 1 = CompletedProcess(args=['/usr/local/bin/python', '/workspaces/DESIGNER-v2/designer2/designer.py', '/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz', '/tmp/designer_real_test_kgcovtej/denoise_test', '-denoise', '-extent', '3,3,3', '-scratch', '/tmp/designer_real_test_kgcovtej/scratch3', '-nocleanup'], returncode=1, stdout='... no bids files or image orientation key identified\nAssuming orientation is axial based on strides\n... no bids files identified\ninput DWI data has properties:\n             0     1\nb-value    0.0   1.0\nb-shape    1.0   1.0\nn volumes  3.0  27.0\necho time  0.0   0.0\n', stderr='designer.py: \ndesigner.py: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.\ndesigner.py: \ndesigner.py: Generated scratch directory: /tmp/designer_real_test_kgcovtej/scratch3\nCommand:  mrinfo -strides "/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz"\nCommand:  mrconvert -strides "1,2,3,4" -fslgrad "/tmp/designer_real_test_kgcovtej/data/meso1.bvec" "/tmp/designer_real_test_kgcovtej/data/meso1.bval" "/tmp/designer_real_test_kgcovtej/data/meso1.nii.gz" "/tmp/designer_real_test_kgcovtej/scratch3/dwi.mif"\n/workspaces/DESIGNER-v2/lib/designer_input_utils.py:453: UserWarning: \x1b[31m[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file\n  warnings.warn(Fore.RED + \'[WARNING]... No echo time found in header, assuming 0 unless specifified by a .echotime file\')\ndesigner.py: Changing to scratch directory (/tmp/designer_real_test_kgcovtej/scratch3)\n/usr/local/lib/python3.12/site-packages/ants/utils/mni2tal.py:5: SyntaxWarning: invalid escape sequence \'\\%\'\n  """\n\ndesigner.py: [ERROR] Unhandled Python exception:\ndesigner.py: [ERROR]   KeyError: \'antsImageHeaderInfo\'\ndesigner.py: [ERROR] Traceback:\ndesigner.py: [ERROR]   /workspaces/DESIGNER-v2/designer2/designer.py:145 (in execute())\ndesigner.py: [ERROR]     run_mppca(\ndesigner.py: [ERROR]   /workspaces/DESIGNER-v2/lib/designer_func_wrappers.py:46 (in run_mppca())\ndesigner.py: [ERROR]     nii = image_read(\'tmp_dwi.nii\')\ndesigner.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:517 (in image_read())\ndesigner.py: [ERROR]     hinfo = image_header_info(filename)\ndesigner.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/core/ants_image_io.py:433 (in image_header_info())\ndesigner.py: [ERROR]     libfn = utils.get_lib_fn("antsImageHeaderInfo")\ndesigner.py: [ERROR]   /usr/local/lib/python3.12/site-packages/ants/utils/process_args.py:29 (in get_lib_fn())\ndesigner.py: [ERROR]     return lib.__dict__[string]\ndesigner.py: Scratch directory retained; location: /tmp/designer_real_test_kgcovtej/scratch3\n').returncode</failure></testcase><testcase classname="tests.test_real_integration.TestDesignerRealIntegration" name="test_invalid_input_handling" time="1.469"><failure message="AssertionError: Command should have failed with invalid input&#10;assert 0 != 0&#10; +  where 0 = CompletedProcess(args=['/usr/local/bin/python', '/workspaces/DESIGNER-v2/designer2/designer.py', '/nonexistent/file.nii', '/tmp/designer_real_test_kgcovtej/error_test', '-scratch', '/tmp/designer_real_test_kgcovtej/scratch4', '-nocleanup'], returncode=0, stdout='cannot find input /nonexistent/file.nii\n', stderr='designer.py: \ndesigner.py: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.\ndesigner.py: \ndesigner.py: Generated scratch directory: /tmp/designer_real_test_kgcovtej/scratch4\ndesigner.py: Scratch directory retained; location: /tmp/designer_real_test_kgcovtej/scratch4\n').returncode">tests/test_real_integration.py:434: in test_invalid_input_handling
    assert result.returncode != 0, "Command should have failed with invalid input"
E   AssertionError: Command should have failed with invalid input
E   assert 0 != 0
E    +  where 0 = CompletedProcess(args=['/usr/local/bin/python', '/workspaces/DESIGNER-v2/designer2/designer.py', '/nonexistent/file.nii', '/tmp/designer_real_test_kgcovtej/error_test', '-scratch', '/tmp/designer_real_test_kgcovtej/scratch4', '-nocleanup'], returncode=0, stdout='cannot find input /nonexistent/file.nii\n', stderr='designer.py: \ndesigner.py: Note that this script makes use of commands / algorithms that have relevant articles for citation; INCLUDING FROM EXTERNAL SOFTWARE PACKAGES. Please consult the help page (-help option) for more information.\ndesigner.py: \ndesigner.py: Generated scratch directory: /tmp/designer_real_test_kgcovtej/scratch4\ndesigner.py: Scratch directory retained; location: /tmp/designer_real_test_kgcovtej/scratch4\n').returncode</failure></testcase><testcase classname="tests.test_real_integration.TestDesignerRealIntegration" name="test_custom_bval_bvec_files" time="2.816"><failure message="AssertionError: Expected output file not found: /tmp/designer_real_test_kgcovtej/custom_bval_test.nii.gz&#10;assert False&#10; +  where False = exists()&#10; +    where exists = PosixPath('/tmp/designer_real_test_kgcovtej/custom_bval_test.nii.gz').exists">tests/test_real_integration.py:465: in test_custom_bval_bvec_files
    self.assert_output_files_exist(str(output_path), ['.nii.gz', '.bval', '.bvec'])
tests/test_real_integration.py:256: in assert_output_files_exist
    assert file_path.exists(), f"Expected output file not found: {file_path}"
E   AssertionError: Expected output file not found: /tmp/designer_real_test_kgcovtej/custom_bval_test.nii.gz
E   assert False
E    +  where False = exists()
E    +    where exists = PosixPath('/tmp/designer_real_test_kgcovtej/custom_bval_test.nii.gz').exists</failure></testcase><testcase classname="tests.test_real_integration.TestDesignerRealIntegration" name="test_processing_performance" time="2.564" /><testcase classname="tests.test_real_integration.TestDesignerRealIntegration" name="test_output_data_validation" time="2.546"><failure message="FileNotFoundError: No such file or no access: '/tmp/designer_real_test_kgcovtej/validation_test.nii.gz'">/usr/local/lib/python3.12/site-packages/nibabel/loadsave.py:100: in load
    stat_result = os.stat(filename)
                  ^^^^^^^^^^^^^^^^^
E   FileNotFoundError: [Errno 2] No such file or directory: '/tmp/designer_real_test_kgcovtej/validation_test.nii.gz'

During handling of the above exception, another exception occurred:
tests/test_real_integration.py:529: in test_output_data_validation
    output_img = nib.load(f"{output_path}.nii.gz")
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.12/site-packages/nibabel/loadsave.py:102: in load
    raise FileNotFoundError(f"No such file or no access: '{filename}'")
E   FileNotFoundError: No such file or no access: '/tmp/designer_real_test_kgcovtej/validation_test.nii.gz'</failure></testcase></testsuite></testsuites>